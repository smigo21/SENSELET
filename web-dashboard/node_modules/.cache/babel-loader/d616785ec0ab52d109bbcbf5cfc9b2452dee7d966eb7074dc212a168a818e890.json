{"ast":null,"code":"import _objectSpread from\"/home/login/Downloads/SENSELET/web-dashboard/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AlertsList=()=>{const[alerts,setAlerts]=useState([{id:1,type:'Price Spike',severity:'Critical',message:'Maize prices increased by 35% in Addis Ababa market',location:'Addis Ababa',timestamp:'2024-01-15 14:30',acknowledged:false},{id:2,type:'Transport Delay',severity:'High',message:'Route Addis Ababa ‚Üí Jimma delayed by 2 hours',location:'Addis Ababa ‚Üí Jimma',timestamp:'2024-01-15 13:45',acknowledged:false},{id:3,type:'Spoilage',severity:'High',message:'Cold storage failure detected at Hawassa facility',location:'Hawassa',timestamp:'2024-01-15 12:20',acknowledged:true},{id:4,type:'Crop Shortage',severity:'Medium',message:'Wheat shortage expected in Tigray region',location:'Tigray',timestamp:'2024-01-15 11:15',acknowledged:false},{id:5,type:'Cold Storage Failure',severity:'Critical',message:'Temperature sensor failure at Bahir Dar storage',location:'Bahir Dar',timestamp:'2024-01-15 10:30',acknowledged:false}]);const[showPopup,setShowPopup]=useState(false);const[latestAlert,setLatestAlert]=useState(null);// Simulate real-time alerts\nuseEffect(()=>{const interval=setInterval(()=>{// Randomly add new alerts for demo\nif(Math.random()<0.3){const newAlert={id:Date.now(),type:['Price Spike','Crop Shortage','Spoilage','Cold Storage Failure','Transport Delay'][Math.floor(Math.random()*5)],severity:['Critical','High','Medium','Low'][Math.floor(Math.random()*4)],message:'New alert generated for monitoring',location:['Addis Ababa','Hawassa','Bahir Dar','Dire Dawa'][Math.floor(Math.random()*4)],timestamp:new Date().toLocaleString(),acknowledged:false};setAlerts(prevAlerts=>[newAlert,...prevAlerts]);setLatestAlert(newAlert);setShowPopup(true);setTimeout(()=>setShowPopup(false),5000);}},30000);// Check every 30 seconds\nreturn()=>clearInterval(interval);},[]);const acknowledgeAlert=id=>{setAlerts(prevAlerts=>prevAlerts.map(alert=>alert.id===id?_objectSpread(_objectSpread({},alert),{},{acknowledged:true}):alert));};const getSeverityColor=severity=>{switch(severity){case'Critical':return'critical';case'High':return'high';case'Medium':return'medium';case'Low':return'low';default:return'gray-500';}};const getTypeIcon=type=>{switch(type){case'Price Spike':return'üìà';case'Crop Shortage':return'üåæ';case'Spoilage':return'üóëÔ∏è';case'Cold Storage Failure':return'‚ùÑÔ∏è';case'Transport Delay':return'üöö';default:return'‚ö†Ô∏è';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-card p-4 shadow-md rounded-md border\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-lg mb-4\",children:\"Critical Alerts\"}),showPopup&&latestAlert&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-warning text-white rounded-md animate-pulse\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"New Alert:\"}),\" \",latestAlert.message]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-96 overflow-y-auto\",children:alerts.map(alert=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-3 mb-2 rounded-md border-2 cursor-pointer transition-all hover:shadow-md \".concat(alert.acknowledged?'bg-gray-100 opacity-70':'bg-white'),style:{borderColor:\"var(--tw-ring-color-\".concat(getSeverityColor(alert.severity),\")\")},onClick:()=>!alert.acknowledged&&acknowledgeAlert(alert.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg mr-2\",children:getTypeIcon(alert.type)}),/*#__PURE__*/_jsx(\"strong\",{className:\"text-\".concat(getSeverityColor(alert.severity)),children:alert.type}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 px-2 py-1 rounded text-xs text-white bg-\".concat(getSeverityColor(alert.severity)),children:alert.severity})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mb-1\",children:alert.message}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-gray-600\",children:[alert.location,\" \\u2022 \",alert.timestamp]})]}),!alert.acknowledged&&/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();acknowledgeAlert(alert.id);},className:\"px-3 py-1 bg-safe text-white rounded hover:bg-green-600 transition-colors\",children:\"Acknowledge\"})]},alert.id))}),alerts.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500 italic\",children:\"No alerts at this time\"})]});};export default AlertsList;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AlertsList","alerts","setAlerts","id","type","severity","message","location","timestamp","acknowledged","showPopup","setShowPopup","latestAlert","setLatestAlert","interval","setInterval","Math","random","newAlert","Date","now","floor","toLocaleString","prevAlerts","setTimeout","clearInterval","acknowledgeAlert","map","alert","_objectSpread","getSeverityColor","getTypeIcon","className","children","concat","style","borderColor","onClick","e","stopPropagation","length"],"sources":["/home/login/Downloads/SENSELET/web-dashboard/src/components/dashboard/AlertsList.tsx"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\n\ninterface Alert {\n  id: number;\n  type: 'Price Spike' | 'Crop Shortage' | 'Spoilage' | 'Cold Storage Failure' | 'Transport Delay';\n  severity: 'Critical' | 'High' | 'Medium' | 'Low';\n  message: string;\n  location: string;\n  timestamp: string;\n  acknowledged: boolean;\n}\n\nconst AlertsList: React.FC = () => {\n  const [alerts, setAlerts] = useState<Alert[]>([\n    {\n      id: 1,\n      type: 'Price Spike',\n      severity: 'Critical',\n      message: 'Maize prices increased by 35% in Addis Ababa market',\n      location: 'Addis Ababa',\n      timestamp: '2024-01-15 14:30',\n      acknowledged: false\n    },\n    {\n      id: 2,\n      type: 'Transport Delay',\n      severity: 'High',\n      message: 'Route Addis Ababa ‚Üí Jimma delayed by 2 hours',\n      location: 'Addis Ababa ‚Üí Jimma',\n      timestamp: '2024-01-15 13:45',\n      acknowledged: false\n    },\n    {\n      id: 3,\n      type: 'Spoilage',\n      severity: 'High',\n      message: 'Cold storage failure detected at Hawassa facility',\n      location: 'Hawassa',\n      timestamp: '2024-01-15 12:20',\n      acknowledged: true\n    },\n    {\n      id: 4,\n      type: 'Crop Shortage',\n      severity: 'Medium',\n      message: 'Wheat shortage expected in Tigray region',\n      location: 'Tigray',\n      timestamp: '2024-01-15 11:15',\n      acknowledged: false\n    },\n    {\n      id: 5,\n      type: 'Cold Storage Failure',\n      severity: 'Critical',\n      message: 'Temperature sensor failure at Bahir Dar storage',\n      location: 'Bahir Dar',\n      timestamp: '2024-01-15 10:30',\n      acknowledged: false\n    }\n  ]);\n\n  const [showPopup, setShowPopup] = useState(false);\n  const [latestAlert, setLatestAlert] = useState<Alert | null>(null);\n\n  // Simulate real-time alerts\n  useEffect(() => {\n    const interval = setInterval(() => {\n      // Randomly add new alerts for demo\n      if (Math.random() < 0.3) {\n        const newAlert: Alert = {\n          id: Date.now(),\n          type: ['Price Spike', 'Crop Shortage', 'Spoilage', 'Cold Storage Failure', 'Transport Delay'][Math.floor(Math.random() * 5)] as Alert['type'],\n          severity: ['Critical', 'High', 'Medium', 'Low'][Math.floor(Math.random() * 4)] as Alert['severity'],\n          message: 'New alert generated for monitoring',\n          location: ['Addis Ababa', 'Hawassa', 'Bahir Dar', 'Dire Dawa'][Math.floor(Math.random() * 4)],\n          timestamp: new Date().toLocaleString(),\n          acknowledged: false\n        };\n        setAlerts(prevAlerts => [newAlert, ...prevAlerts]);\n        setLatestAlert(newAlert);\n        setShowPopup(true);\n        setTimeout(() => setShowPopup(false), 5000);\n      }\n    }, 30000); // Check every 30 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const acknowledgeAlert = (id: number) => {\n    setAlerts(prevAlerts =>\n      prevAlerts.map(alert =>\n        alert.id === id ? { ...alert, acknowledged: true } : alert\n      )\n    );\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'Critical': return 'critical';\n      case 'High': return 'high';\n      case 'Medium': return 'medium';\n      case 'Low': return 'low';\n      default: return 'gray-500';\n    }\n  };\n\n  const getTypeIcon = (type: string) => {\n    switch (type) {\n      case 'Price Spike': return 'üìà';\n      case 'Crop Shortage': return 'üåæ';\n      case 'Spoilage': return 'üóëÔ∏è';\n      case 'Cold Storage Failure': return '‚ùÑÔ∏è';\n      case 'Transport Delay': return 'üöö';\n      default: return '‚ö†Ô∏è';\n    }\n  };\n\n  return (\n    <div className=\"bg-card p-4 shadow-md rounded-md border\">\n      <h2 className=\"font-bold text-lg mb-4\">Critical Alerts</h2>\n\n      {/* Popup for new alerts */}\n      {showPopup && latestAlert && (\n        <div className=\"mb-4 p-3 bg-warning text-white rounded-md animate-pulse\">\n          <strong>New Alert:</strong> {latestAlert.message}\n        </div>\n      )}\n\n      <div className=\"max-h-96 overflow-y-auto\">\n        {alerts.map((alert) => (\n          <div\n            key={alert.id}\n            className={`flex justify-between items-center p-3 mb-2 rounded-md border-2 cursor-pointer transition-all hover:shadow-md ${\n              alert.acknowledged ? 'bg-gray-100 opacity-70' : 'bg-white'\n            }`}\n            style={{ borderColor: `var(--tw-ring-color-${getSeverityColor(alert.severity)})` }}\n            onClick={() => !alert.acknowledged && acknowledgeAlert(alert.id)}\n          >\n            <div className=\"flex-1\">\n              <div className=\"flex items-center mb-1\">\n                <span className=\"text-lg mr-2\">{getTypeIcon(alert.type)}</span>\n                <strong className={`text-${getSeverityColor(alert.severity)}`}>{alert.type}</strong>\n                <span className={`ml-2 px-2 py-1 rounded text-xs text-white bg-${getSeverityColor(alert.severity)}`}>\n                  {alert.severity}\n                </span>\n              </div>\n              <p className=\"text-sm mb-1\">{alert.message}</p>\n              <small className=\"text-gray-600\">\n                {alert.location} ‚Ä¢ {alert.timestamp}\n              </small>\n            </div>\n\n            {!alert.acknowledged && (\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  acknowledgeAlert(alert.id);\n                }}\n                className=\"px-3 py-1 bg-safe text-white rounded hover:bg-green-600 transition-colors\"\n              >\n                Acknowledge\n              </button>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {alerts.length === 0 && (\n        <div className=\"text-center py-8 text-gray-500 italic\">\n          No alerts at this time\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AlertsList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}